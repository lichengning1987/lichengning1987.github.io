<!DOCTYPE>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <title>啊呜购</title>
    <meta content="商旅生活手机购物，正品商城，品牌特卖会" name="keywords">
    <meta content="商旅生活手机购物网以1-7折超低折扣对全球各大品牌进行限时特卖，商城内正品囊括服装、化妆品、家居、奢侈品等。100%正品、手机购物下单、货到付款、7天无条件退货。" name="description">
    <link rel="stylesheet" href="/h5switch/css/base.css">
    <link rel="stylesheet" href="/h5switch/css/saySwipe.css">
    <style type="text/css">
@-webkit-keyframes fadeOutUp {
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
            transform: translate3d(0, -100%, 0);
  }
}

@keyframes fadeOutUp {
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
    -webkit-transform: translate3d(0, -100%, 0);
            transform: translate3d(0, -100%, 0);
  }
}

.fadeOutUp {-webkit-animation-name: fadeOutUp;animation-name: fadeOutUp;}

.animated {
  -webkit-animation-duration: 1s;
          animation-duration: 1s;
  -webkit-animation-fill-mode: both;
          animation-fill-mode: both;
}
.item{
  /*设置内嵌的元素在 3D 空间如何呈现：保留 3D*/
  /*-webkit-transform-style: preserve-3d;*/
  /*（设置进行转换的元素的背面在面对用户时是否可见：隐藏）*/
  -webkit-backface-visibility: hidden;

}
.wrap{
  -webkit-transform-style: preserve-3d;
}
    </style>
</head>
<body>
    <div id="wrap"><div id="loading"><div style="width: 50%;"></div></div></div>

<div class="wrap">
    <div class="item item-0 play">
        <div class="box">
            <div class="i0-tit animation  fadeLeft ">

            </div>
           <div class="i1-tit animation  fadeTop timetwo">
               <div class="pos">
                   有些事我得告诉你....
                    <i class="i1-tit-arrow"></i>
               </div>
            </div>

        </div>

        <!--可自定义背景图-->
        <div class="bg animationbg cls11   heart_beat lazyload" data-bg="/h5switch/img/say/t11.jpg"></div>
    </div>

    <div class="item item-1">
        <div class="box">
            <div class="i2-tit animation  fadeTop">
                   <p>大家都知道，水果这行业，水很深很 </p>
                   <p>深……具体有多深，啊呜也不知道。</p>
            </div>
            <div class="i3-tit animation  fadeLeft timetwo">
                  <div class="pos">
                      <p>
                         因为“涉世不深”，所以啊呜只能先
                      </p>
                      <p><strong>“独善其身”</strong>，再<strong>“兼济天下”</strong>。</p>
                    <i class="i1-tit-arrow"></i>
               </div>
            </div>
             <div class="i33-tit animation  fadeRight timeone ">
            </div>
        </div>
        <!--可自定义背景图-->
        <div class="bg animationbg  heart_beat lazyload" data-bg="/h5switch/img/say/t2.jpg"></div>
    </div>

    <div class="item item-2">
        <div class="box">
            <div class="i4-tit animation  fadeIn time5">

            </div>

        </div>
        <!--可自定义背景图-->
        <div class="bg animationbg  heart_beat lazyload" data-bg="/h5switch/img/say/t3.jpg"></div>
    </div>

    <div class="item item-3">
        <div class="box">
                      <div class="i7-tit animation  fadeTop">

                       </div>
                       <div class="i8-tit animation  fadeBot timeone">
                           <div class="pos">
                               <p>
                                  水果店、超市、高档水果超市，进一批货卖几天，然后尾货打折处理。所以，你以为自己每天买水果就能买到新鲜的，简直图样图森破。
                               </p>
                               <i class="icon-left"></i>
                           </div>
                       </div>
                       <div class="i9-tit animation  fadeBot timetwo">
                           <div class="pos">
                              <p>
                                为保证每一刻“鲜”，每天啊呜会选择50%水果上架，而15点以后，当日剩下的水果则处理给超市、水果店。所以，啊呜提供的始终是<strong>当日到货的新鲜水果。</strong>
                              </p>
                               <i class="icon-right"></i>
                           </div>
                       </div>
            <div class="t3-icon animation  fadeBot timetwo">

            </div>
             <div class="t33-icon animation  fadeBot timeone">

            </div>

        </div>
        <!--可自定义背景图-->
        <div class="bg animationbg1  heart_beat lazyload" data-bg="/h5switch/img/say/t4.jpg"></div>
    </div>

    <div class="item item-4">
        <div class="box">
                      <div class="i7-tit animation  fadeTop">

                       </div>
                       <div class="i8-tit animation  fadeBot timeone">
                           <div class="pos">
                               <p>
                                  啊呜对品质的把控几乎“变态”，每天两位处女座专职品控，对外观、口感一丝不苟，扔水果扔到手软。
                               </p>
                               <i class="icon-left"></i>
                           </div>
                       </div>
                       <div class="i9-tit animation  fadeBot timetwo">
                           <div class="pos">
                              <p>
                               随机挑选吃货试吃，<strong>一人说NO直接PASS，不卖！</strong>为什么啊呜这么任性？因为那些被嫌弃的水果，会跟“过期”的同胞们，去往超市、水果店。
                              </p>
                               <i class="icon-right"></i>
                           </div>
                       </div>
            <div class="t3-icon animation  fadeBot timetwo">

            </div>
             <div class="t33-icon animation  fadeBot timeone">

            </div>

        </div>
        <!--可自定义背景图-->
        <div class="bg animationbg1  heart_beat lazyload" data-bg="/h5switch/img/say/t5.jpg"></div>
    </div>
    <div class="item item-5">
        <div class="box">
           <div class="i7-tit animation  fadeTop">
           </div>
           <div class="i3-tit animation  fadeLeft timeone">
                  <div class="pos">
                      <p>
                         经过两重关卡而过关的水果，啊呜会通过当日达配送，避免水果在快递处过夜。最后恭喜你，得到了<strong style="color:#EB891C;">杭州全城水果每天最新鲜的20%。</strong>
                      </p>
                    <i class="i1-tit-arrow"></i>
               </div>
           </div>
           <a class="i5-buy animation  fadeRight timetwo" href="http://awu.hslvv.com" target="_blank" rel="external"></a>

        </div>
        <!--可自定义背景图-->
        <div class="bg animationbg1  heart_beat lazyload" data-bg="/h5switch/img/say/t6.jpg"></div>
    </div>


    <div class="mod_control firstScr">
          <div class="mod_start"><i></i></div>
     </div>
</div>
   
<script type="text/javascript" src="http://g.tbcdn.cn/mtb/zepto/1.0.4/zepto.js"></script>
    <script type="text/javascript">
/*    $.extend($.fn,{
        mslide: function(option){

            var lazyload = function(obj){
              this.con = obj.container||$("body");
              this.nodename = obj.node||".lazyload";
              this.init();
           };
           lazyload.prototype.init = function(){
               var _self = this;
                //懒加载背景图
                //懒加载img图
                this.con.find(_self.nodename).each(function(){
                   var src = $(this).attr("data-src");
                   var bg = $(this).attr("data-bg");
                   //config.log(bg);
                   bg ? $(this).css("background-image","url("+bg+")"):"";
                   src ? $(this).attr('src',src):"";

                });
                delete this;
           }

           var config = {
             el:".item",//每一屏节点的容器名
             isdebug:false,//开启debug模式
             speed:0.5,//滑屏动画的时间
             triggerdis:50,//滑屏多少像素后有效，小于这个值将回退到初始状态
             eventlist:["touchstart","touchmove","touchend"],
             wh:$(window).height(),
             init : function(){
                 var _this=this;
                  //初始化高度
                  $(_this.el).height($(window).height());
                  new lazyload({container:$(_this.el).eq(1)});
             }
           }
           config.init();

           //移动相关对象
          var _move={
             dis:0,//触摸的方向，大于0为向上
             dir:0,//手指划过的距离
             touchtime:0,//触摸的次数，避免多指触摸
             index:0,//当前滚屏的索引值
             per:0//滚动时候改变高度的百分比
          };
          //绑定触摸事件
           var _touch = {
                touch:function(el,index){
                   var y1 = 0,y2 = 0;
                   $(el)[0].addEventListener(config.eventlist[0], function (e) {
                      //touchstart
                      _move.index=index;//按下的时候记录索引值，阻止默认事件
                      e.preventDefault();
                        y1 = e.targetTouches[0].pageY;
                        _move.dis=0;_move.dir=0;_move.touchtime+=1;
                         //触摸开始时懒加载,提前两屏
                    });
                    $(el)[0].addEventListener(config.eventlist[2], function (e) {
                      //触摸结束的时候
                      y2 = e.changedTouches[0].pageY;
                      _move.dis = y2 - y1;
                      $(el).next(config.el) ? new lazyload({container:$(el).next(config.el).next(config.el)}):"";
                      // 判断几个点触摸，大于2个的时候不执行后续操作
                      if(_move.touchtime>=2){_move.touchtime=0;return false;}
                      e.preventDefault();
                      _move.touchtime=0;
                     // alert($(el).next(config.el).length);
                        if(_move.dis<0)
                        {
                         //向上滑，滚至下一张
                         if($(el).next(config.el).length>0)
                         {

                            $(el).css({
                              '-webkit-transform':"translate3d(0px, -100%,0)",
                              'transform':"translate3d(0px, -100%,0)",
                              '-webkit-transition':"-webkit-transform 0.6s ease",
                              'transition':"-webkit-transform 0.6s ease"
                            }).one("webkitTransitionEnd",function(){
                               $(this).removeClass("play");
                            })
                            $(el).next(".item").css({
                              '-webkit-transform':"translate3d(0px, 0,0)",
                              'transform':"translate3d(0px, 0,0)",
                              '-webkit-transition':"-webkit-transform 0.6s ease",
                              'transition':"-webkit-transform 0.6s ease"
                            }).one("webkitTransitionEnd",function(){
                               $(this).addClass("play");
                            })

                         }
                        }
                        else if(_move.dis>0)
                        {
                         //向下滑
                         if($(el).prev(config.el).length>0)
                         {

                            $(el).css({
                              '-webkit-transform':"translate3d(0px, 100%,0)",
                              'transform':"translate3d(0px, 100%,0)",
                              '-webkit-transition':"-webkit-transform 0.6s ease",
                              'transition':"-webkit-transform 0.6s ease"
                            }).one("webkitTransitionEnd",function(){
                               $(this).removeClass("play");
                            })
                            $(el).prev(".item").css({
                              '-webkit-transform':"translate3d(0px, 0,0)",
                              'transform':"translate3d(0px, 0,0)",
                              '-webkit-transition':"-webkit-transform 0.6s ease",
                              'transition':"-webkit-transform 0.6s ease"
                            }).one("webkitTransitionEnd",function(){
                               $(this).addClass("play");
                            })

                         }
                        }
                    });
                    $(el)[0].addEventListener(config.eventlist[1], function (e) {
                      //正在触摸的期间，触摸多少距离，容器的高度就减小多少距离，高度按百分比来计算
                      e.preventDefault();
                      if(_move.touchtime>=2){return false;}


                    });
                },
                init:function(){
                   //通过循环给每一屏绑定触摸事件,注意节点的角标序号
                   for(var i=0;i<$(config.el).length;i++)
                   {
                      this.touch(".item-"+i,i);
                   }
                }
             };
           _touch.init();
        }
    })*/
;(function($){
    var mslidePlu = function(opts,self,index){
        this._way = "";
        this._siblingElement = "";
        this.opts = opts;
        this.self = self;
        this.index = index;
        this.startY = 0;
        this.endY = 0;
        this.spans = 0;
        this.init();
    }
    mslidePlu.prototype = {
        construct: mslidePlu,
        init : function(){
            this.initFirst();
            this.touch();
        },
        initFirst : function(){
            //初始化高度
            $(this.opts.config.el).height($(window).height());
            $(this.opts.config.el).css({
                "overflow":"hidden",
                "-webkit-backface-visibility":"hidden"
            });
            $(this.opts.config.el).css({
                    "-webkit-transform":"translate(0,100%)"
             });
            $(this.opts.config.el).eq(0).css({
                    "-webkit-transform":"translate(0,0%)"
             });
            this.lazyload({container : $(this.opts.config.el).eq(1)});
        },
        lazyload : function(obj){
            //懒加载图片和背景
            this.con = obj.container || $("body");
            this.nodename = obj.node || ".lazyload";
            this.con.find(this.nodename).each(function(){
                var src = $(this).attr('data-src');
                var bg = $(this).attr('data-bg');
                bg ? $(this).css("background-image","url("+ bg+")"): "";
                src ? $(this).attr('src',src) : "";
            })
        },
        refreshElement: function(currentVal){
           //偏移量
            var dist =  currentVal;
            if(dist>0){
                this._way="down";
                this._siblingElement =  $(this.self).prev(this.opts.config.el) ;
            }else if(dist<0){
                this._way="up";
                this._siblingElement =  $(this.self).next(this.opts.config.el) ;
            }
            return dist;
        },
        swipe : function(swipSpan){
            //触屏缓冲函数
            var  translate = 0;
            translate += swipSpan;
            var dist = this.refreshElement(translate);
            if(!dist) {return;}

            if(this._way==="up"){
                    curTransformVal="translate3d(0,"+translate+"px,0)";
                    sibTransformVal="translate3d(0,"+(translate+$(window).height())+"px,0)";
                }else if(this._way==="down"){
                    curTransformVal="translate3d(0,"+translate+"px,0)";
                    sibTransformVal="translate3d(0,"+(translate-$(window).height())+"px,0)";
            }

            $(this.self).css({
                '-webkit-transition' : 'none',
                '-webkit-transform': curTransformVal,
                'transform': curTransformVal
            })

            $(this._siblingElement).css({
               '-webkit-transition' : 'none',
                '-webkit-transform': sibTransformVal,
                'transform': sibTransformVal
            })


        },
        initpos : function(){ //初始化位置
           var _this = this;
           if(_this._way == "up"){
                $(this.self).css({
                     '-webkit-transform':"translate(0px, 0)",
                    'transform':"translate(0px, 0)",
                    '-webkit-transition' : '-webkit-transform 0.4s ease-out,opacity 0.4s ease-out',
                }).one('webkitTransitionEnd', function () {
                    $(this).css({
                        '-webkit-transform' : "translate(0px, 0)"
                    });
                });
                $(_this._siblingElement).css({
                   '-webkit-transform':"translate(0px, 100%)",
                    'transform':"translate(0px, 100%)",
                    '-webkit-transition' : '-webkit-transform 0.4s ease-out,opacity 0.4s ease-out',
                }).one('webkitTransitionEnd', function () {
                        $(this).removeClass("play");
                });

           }else if(_this._way == "down"){
                $(this.self).css({
                     '-webkit-transform':"translate(0px, 0)",
                    'transform':"translate(0px, 0)",
                    '-webkit-transition' : '-webkit-transform 0.4s ease-out,opacity 0.4s ease-out',
                }).one('webkitTransitionEnd', function () {
                    $(this).css({
                        '-webkit-transform' : "translate(0px, 0)"
                    });
                });
                $(_this._siblingElement).css({
                   '-webkit-transform':"translate(0px, -100%)",
                    'transform':"translate(0px, -100%)",
                    '-webkit-transition' : '-webkit-transform 0.4s ease-out,opacity 0.4s ease-out',
                }).one('webkitTransitionEnd', function () {
                        $(this).removeClass("play");
                });
           }
        },
        touch : function(){
           this.touchStart();
           this.touchEnd();
           this.touchMove();
        },
        touchStart : function(){
            var _this = this;
            $(this.self).on("touchstart",function(e){
               _this.opts._move.index = _this.index;
               e.preventDefault();
               _this.startY = e.targetTouches[0].pageY;
               _this.opts._move.dis = 0;
               _this.opts._move.dir = 0;
               _this.opts._move.touchtime +=1;
               _this.spans = 0;
           })
        },
        touchMove : function(){
            var _this = this;
            $(this.self).on("touchmove", function (e) {
                 //正在触摸的期间，触摸多少距离，容器的高度就减小多少距离，高度按百分比来计算
                 var touch = e.targetTouches[0],swipSpanY = touch.pageY - _this.startY;
                 e.preventDefault();
                 _this.spans =  swipSpanY;
                 if( _this.opts._move.touchtime>=2){return false;}
                 _this.swipe(_this.spans);
            });
        },
        touchEnd : function(){
               var _this = this;
               $(this.self).on("touchend", function (e) {
                   var _movePenc = _this.opts.config.triggerdis / $(window).height();

                   //触摸结束的时候
                   _this.endY = e.changedTouches[0].pageY;
                   _this.opts._move.dis = _this.endY - _this.startY;
                   $(_this.self).next( _this.opts.config.el) ?  _this.lazyload({container:$(_this.self).next( _this.opts.config.el).next( _this.opts.config.el)}):"";
                   // 判断几个点触摸，大于2个的时候不执行后续操作
                   if( _this.opts._move.touchtime >= 2){
                       _this.opts._move.touchtime = 0;
                       return false;
                   }
                   e.preventDefault();
                   _this.opts._move.touchtime = 0;

                    this._canElemMove = Math.abs(_this.spans)/$(window).height() >_movePenc ? true:false; //是否切换

                    if(this._canElemMove){
                         if(_this._way == "up"){
                             _this.upfun();
                         }else if(_this._way == "down"){
                             _this.downfun();
                         }
                    }else{
                        _this.initpos();
                    }
               });
        },
        upfun : function(){
               var _this = this;
              //向上滑
               if(_this.index == $( _this.opts.config.el).size()-1){
                      _this.initpos();
               }else if($(_this.self).next( _this.opts.config.el).length>0){//向上滑，滚至下一张
                  $(_this.self).css({
                       '-webkit-transform':"translate(0px, -100%)",
                       'transform':"translate(0px, -100%)",
                       '-webkit-transition':'-webkit-transform 0.4s ease-out,opacity 0.4s ease-out'
                  }).one("webkitTransitionEnd",function(){
                     $(this).removeClass("play");
                  })
                  $(_this.self).next(".item").css({
                       '-webkit-transform':"translate(0px, 0)",
                       'transform':"translate(0px, 0)",
                       '-webkit-transition':'-webkit-transform 0.4s ease-out,opacity 0.4s ease-out'
                  }).one("webkitTransitionEnd",function(){
                     $(this).addClass("play");
                  })
               }
        },
        downfun : function(){
            var _this = this;
            //向下滑
             if($(_this.self).prev(_this.opts.config.el).length>0){
                $(_this.self).css({
                  '-webkit-transform':"translate(0px, 100%)",
                       'transform':"translate(0px, 100%)",
                       '-webkit-transition':'-webkit-transform 0.4s ease-out,opacity 0.4s ease-out'
                }).one("webkitTransitionEnd",function(){
                   $(this).removeClass("play");
                })
                $(_this.self).prev(".item").css({
                       '-webkit-transform':"translate(0px, 0)",
                       'transform':"translate(0px, 0)",
                       '-webkit-transition':'-webkit-transform 0.4s ease-out,opacity 0.4s ease-out'
                }).one("webkitTransitionEnd",function(){
                   $(this).addClass("play");
                })
             }else if(_this.index == 0){
                 _this.initpos();
             }
        }
    }

    $.extend($.fn,{
        mslide : function(options){
           return this.each(function(index){
               var self = this,ui = $(self).data('mslide');
               if(!ui){
                  var opts = $.extend({}, $.fn.mslide.defaults,options);
                  ui = new mslidePlu(opts,self,index);
                  $(self).data("mslide",ui);
               }
           })
        }
    })
    $.fn.mslide.defaults = {
        isVertical: false,
        config : {
            el:".item",//每一屏节点的容器名
            isdebug:false,//开启debug模式
            speed:0.5,//滑屏动画的时间
            triggerdis:50,//滑屏多少像素后有效，小于这个值将回退到初始状态
            eventlist:["touchstart","touchmove","touchend"]
        },
        _move : {
            dis:0,//触摸的方向，大于0为向上
            dir:0,//手指划过的距离
            touchtime:0,//触摸的次数，避免多指触摸
            index:0,//当前滚屏的索引值
            per:0//滚动时候改变高度的百分比
        }
    }
})(Zepto);

$(function(){
  $(".item").mslide();
})



</script>



</body>
</html>