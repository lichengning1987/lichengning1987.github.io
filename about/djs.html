<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta content="telephone=no" name="format-detection">
	<title>商旅生活手机购物正品商城：一家专门做特卖的网站手机版手机版</title>
	<meta content="商旅生活手机购物，正品商城，品牌特卖会" name="keywords">
	<meta content="商旅生活手机购物网以1-7折超低折扣对全球各大品牌进行限时特卖，商城内正品囊括服装、化妆品、家居、奢侈品等。100%正品、手机购物下单、货到付款、7天无条件退货。" name="description">
	<link href="/djs-style/css/base.css" rel="stylesheet" type="text/css">
	<link href="/djs-style/css/index.css" rel="stylesheet" type="text/css">

</head>
<body>
<div class="mainwrap">

<div class="main">

	<!-- product start -->
	<div class="product">

		<div class="list list1 goods-1">
            <input type="hidden" class="buyTime" data-id="1" data-start="2015/04/16 01:00:50" data-end="2015/04/16 01:00:59" data-state="notBegin">

			<h2 class="product-name">廉江红橙 特价来袭</h2>
			<p class="info notBegin">距离抢购开始：</p>

			<div class="time-wrap notBegin">
                 <span class="time countHour">00</span>：<span class="time countMin">00</span>：<span class="time countSec">00</span>
			</div>
            <p class="notime hide">
                已结束
            </p>

			<img class="list-img" src="/djs-style/img/index/product1.png">
		</div>

       <div class="list list1 goods-2">
            <input type="hidden" class="buyTime" data-id="2" data-start="2015/04/16 01:00:50" data-end="2015/04/16 01:01:05" data-state="notBegin">

			<h2 class="product-name">廉江红橙 特价来袭</h2>
			<p class="info notBegin">距离抢购开始：</p>

			<div class="time-wrap notBegin">
                 <span class="time countHour">00</span>：<span class="time countMin">00</span>：<span class="time countSec">00</span>
			</div>
            <p class="notime hide">
                已结束
            </p>

			<img class="list-img" src="/djs-style/img/index/product1.png">

		</div>
       <div class="list list1 goods-3">
            <input type="hidden" class="buyTime" data-id="3" data-start="2015/04/16 01:00:50" data-end="2015/04/16 01:00:59" data-state="begin">

			<h2 class="product-name">廉江红橙 特价来袭</h2>
			<p class="info begin">距离抢购结束：</p>

			<div class="time-wrap begin">
				<span class="time countHour">00</span>：<span class="time countMin">00</span>：<span class="time countSec">00</span>
			</div>
            <p class="notime hide">
                已结束
            </p>

			<img class="list-img" src="/djs-style/img/index/product1.png">

		</div>

</div>

</div>


 </div>
<!-- script start -->
<script src="/djs-style/js/jquery-2.1.3.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/djs-style/js/plug/dataTimeDown.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    var index={};
    index.init = function(){
        this.nowDate = nowDate;
        index.showDeadLine();
    }
    index.showDeadLine = function(){
        var mdate = new Date();
        //var nowdate = mdate.getFullYear() + '/' + (mdate.getMonth()+1) + '/' + mdate.getDate() +' '+mdate.getHours()+':'+mdate.getMinutes()+':'+mdate.getSeconds();
        var nowdate = index.nowDate;
        var now=new Date(nowdate);

        var objs = $('.buyTime');

        objs.each(function(index,item){
            var id = $(item).data('id');
            var startTime = new Date($(item).data('start'));
            var endTime = new Date($(item).data('end'));
            var state = $(item).data('state');

            $('.goods-'+id).find('.time-wrap').addClass(state);
            $('.goods-'+id).find('.info').addClass(state);
            //抢购未开始
            if(state == 'notBegin'){
                var option = {
                    lastTime:startTime,
                    now:new Date(nowdate)
                };
                $('.goods-'+id).find('.time-wrap').activeCountDown(option,function(){
                    setTimeout(function(){
                        $('.goods-'+id).find(".buyTime").attr("data-state","begin");
                        $('.goods-'+id).find(".info").removeClass("notBegin").addClass("begin");
                        $('.goods-'+id).find(".info").html("距离抢购结束：");
                        $('.goods-'+id).find(".time-wrap").removeClass("notBegin").addClass("begin");
                        var options = {
                            lastTime:endTime,
                            now:startTime
                        };
                        $('.goods-'+id).find('.time-wrap').activeCountDown(options,function(){
                            setTimeout(function(){
                                $('.goods-'+id).find(".buyTime").data("state","end");
                                $('.goods-'+id).find(".info").removeClass("notBegin").removeClass("begin").addClass("end");
                                $('.goods-'+id).find(".info").html("限时抢购：");
                                $('.goods-'+id).find(".time-wrap").removeClass("notBegin").removeClass("begin").addClass("end");
                                $('.goods-'+id).find(".notime").removeClass("hide");
                            },1000)
                        });
                    },1000)
                });
            }

            //抢购开始
            if(state == 'begin'){
                var option = {
                    lastTime:endTime,
                    now:new Date(nowdate)
                };
                $('.goods-'+id).find(".info").html("距离抢购结束：");
                $('.goods-'+id).find('.time-wrap').activeCountDown(option,function(){
                    setTimeout(function(){
                        $('.goods-'+id).find(".buyTime").data("state","end");
                        $('.goods-'+id).find(".info").removeClass("begin").addClass("end");
                        $('.goods-'+id).find(".info").html("限时抢购：");
                        $('.goods-'+id).find(".time-wrap").removeClass("begin").addClass("end");
                        $('.goods-'+id).find(".notime").removeClass("hide");
                    },1000)
                })

            }

            //抢购结束
            if(state == 'end'){

                $('.goods-'+id).find(".info").html("限时抢购：");
                $('.goods-'+id).find(".notime").removeClass("hide");
            }

        })
    }
    $(function(){
        index.init();
    })
</script>
<!-- script end -->
 <script>
/*var nowDate = new Date();*/
var nowDate = '2015/04/16 01:00:45'; //服务器当前时间
var jumpGoodsDetail = 'goods.php?act=detail&goods_id=';
</script>
</body>
</html>